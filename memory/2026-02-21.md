User clarified: "Safe workspace" refers to interacting via the OpenClaw web UI or Telegram chat with this agent.

---

## OpenRouter Key Setup (2026-02-21)
- **arden-router key**: $45/month cap now → $150/month on payday (heavy scripting weeks)
- **agent-zero key**: $35/month cap
- Global default: Default (balanced) — our router overrides per request type
- Default Model: openai/gpt-4o-mini (cheap fallback)
- Strategy: price-first globally, router overrides for intent/priority

## Session: 2026-02-21 (evening) — Command Center & Dashboard Sprint

### Router
- `router/providers.py`: Real OpenRouter HTTP calls with OPENROUTER_API_KEY; 3-attempt retry; `record_spend` on actual usage.
- `router/context.py`: Fixed `_summarize_if_needed` async→sync; `build_context` stays sync; drops oldest non-system messages; pins preserved; exposes `estimated_prompt_tokens_before`.
- `router/main.py`: Added `GET /ui/health` and `GET /ui/logs?type=requests|errors|context&limit=N` (metadata only, no request bodies).
- Router service runs at `http://127.0.0.1:8001`. User must restart with `systemctl --user restart openclaw-dashboard.service` after builds.

### Dashboard
- Stack: Vite + React + TypeScript + Tailwind v4 + Framer Motion. Runs at `http://127.0.0.1:5173`.
- Tailwind v4 pipeline fixed: `@tailwindcss/postcss` in postcss.config.js; no `@apply` in index.css; Google Font in index.html.
- Shared CSS classes: `.glass-panel`, `.neon-border-*`, `.router-core-ring`, `.router-core-inner`, `.provider-node`.
- Live polling: `/ui/health` every 5s, `/ui/logs` every 2.5s; `latestRoute` and `contextTokens` derived from logs.
- `npm run build` passes cleanly.
- **ISSUE OUTSTANDING**: Dashboard still renders as "wireframe + thin boxes" — does not match DALL·E reference images yet. Visual overhaul pass needed.

### Dashboard Stylist Skill
- Created at `skills/dashboard-stylist/` with SKILL.md, ALLOWED_PATHS.txt, FORBIDDEN_PATHS.txt, CHECKLIST.md, README.md.
- Stylist is a role/guardrail (same agent, Arden), NOT a separate process.
- Max 8 source files per task; no router/API/env changes; must `npm run build` after each pass.

### Inference Hierarchy (local-first)
- LM Studio (4090): `http://10.10.10.98:1234` — check `/v1/models` first; currently has qwen2.5-32b, deepseek-r1-14b, gpt-oss-20b, etc.
- Ollama (2080): `http://10.10.10.175:11434` — `mistral:latest` (7.2B Q4_K_M).
- Rule: If LM Studio down → assume Mike is gaming on 4090 → fall back to Ollama silently.
- OpenRouter: only with explicit approval.

### ChatGPT Archive
- Location: `imports/chat-archives/6cf22a6dd0f7b1f14c3678a4a3625e469a545aca871651f45425bd105d50514b-2026-02-17-00-42-25-7412e7141c2b4677ac6b1f0dc86dd871/`
- 682MB; contains conversations.json, chat.html, basispoints.json, PNG files, GUID subfolders.
- Archive Worker goal: "who is Mike / what does he care about" profile → `memory/archive-summaries/profile-from-gpt-YYYY-MM-DD.md`.
- CONSTRAINT: NOTHING from imports/ sent to external APIs without explicit approval. Local models only.
- Status: user said "go ahead" but paused to clarify objective. Not yet started.

### Key Backups
- `configs/router.yaml.backup-pre-agent-routing-2026-02-21` created before any agent-routing changes.

### Next Steps (as of session end)
1. Dashboard visual overhaul — make RouterCore dominant, bold glass panels, neon treatment matching DALL·E refs.
2. Archive Worker first pass — confirm goal with Mike, then run against conversations.json with LM Studio/Ollama.
3. Agent → router wiring — draft config changes for user to apply manually (OpenClaw agent JSON → `http://127.0.0.1:8001/v1/chat/completions`).
4. Orbit Tasks / AuDHD layer — `tasks/today.md`, `configs/schedule.md`, `OrbitTasks` dashboard component.
5. COMMAND-CENTER.md and ROUTER.md updates.

